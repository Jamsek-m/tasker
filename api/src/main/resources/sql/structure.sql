create table configuration (id bigint generated by default as identity, config_key varchar(255) not null, config_value varchar(255), user_defined boolean default true, primary key (id));
create table deployments (id bigint generated by default as identity, container_id varchar(255), container_name varchar(255), version varchar(255), docker_daemon_id bigint, primary key (id));
create table docker_daemons (id bigint generated by default as identity, name varchar(255) not null, url varchar(255) not null, primary key (id));
create table login_sessions (id bigint generated by default as identity, expires timestamp, ip varchar(255), session_id varchar(255), user_id bigint, primary key (id));
create table logs (id bigint generated by default as identity, log_date timestamp, message varchar(255), severity varchar(255), primary key (id));
create table service_healthcheck_fixes (id bigint generated by default as identity, fixUrl varchar(255), health_check_name varchar(255), method varchar(255), healthcheck_id bigint, primary key (id));
create table service_healthchecks (id bigint generated by default as identity, health_url varchar(255), primary key (id));
create table service_urls (id bigint generated by default as identity, url varchar(255), url_versioning boolean, version varchar(255), primary key (id));
create table services (id bigint generated by default as identity, active boolean, description varchar(255), name varchar(255) not null, token varchar(255), version varchar(255) not null, deployment_id bigint, health_check_id bigint, url_id bigint, primary key (id));
create table users (id bigint generated by default as identity, password varchar(255) not null, username varchar(255) not null, primary key (id));
create index KEY_UNIQUE_INDEX on configuration (config_key);
alter table configuration add constraint UK_fe9jr3m4w3y3gy1pchksbt7v5 unique (config_key);
alter table docker_daemons add constraint UK_rby7ea40selhpgk0isap43dlu unique (name);
alter table login_sessions add constraint IP_UNIQUE_INDEX unique (ip);
alter table login_sessions add constraint UK_qf5t7odt2aeesrtlug9yrrwlt unique (session_id);
alter table services add constraint NAME_UNIQ_INDEX unique (name, version);
create index USERNAME_UNIQUE_INDEX on users (username);
alter table users add constraint UK_r43af9ap4edm43mmtq01oddj6 unique (username);
alter table deployments add constraint FKsj0whq964vtcq07m3rfnf8qnm foreign key (docker_daemon_id) references docker_daemons;
alter table service_healthcheck_fixes add constraint FK5q5bm6jhu03a3oox6u3qvgxwf foreign key (healthcheck_id) references service_healthchecks;
alter table services add constraint FK15pn8oulot7n6s9ws11p8dl1f foreign key (deployment_id) references deployments;
alter table services add constraint FKt9kvtkwf8qqmxm7tcpkrirpio foreign key (health_check_id) references service_healthchecks;
alter table services add constraint FK1q512wsvik1e877mu6geiicu1 foreign key (url_id) references service_urls;